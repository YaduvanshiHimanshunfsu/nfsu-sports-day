<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ sport }} | NFSU Sports Day</title>

    <!-- CSS -->
    <link rel="stylesheet" href="/static/style.css">

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">

    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="result-page">

<!-- ======================================================
     HEADER
====================================================== -->

<div class="result-header">
    <h1>{{ sport }}</h1>
    <a href="/" class="back-btn">â¬… Back to Home</a>
</div>

<!-- ======================================================
     NO DATA MESSAGE
====================================================== -->

{% if grouped_data|length == 0 %}
    <div class="no-data">
        No data found for this sport.
    </div>
{% endif %}

<!-- ======================================================
     CHART SECTION
====================================================== -->

{% if grouped_data|length > 0 %}

<div class="chart-section">
    <h2>ðŸ“Š Participation Overview</h2>

    <div class="chart-box">
        <canvas id="programmeChart"></canvas>
    </div>

    <br><br>

    <div class="chart-box">
        <canvas id="semesterChart"></canvas>
    </div>
</div>

<!-- JSON DATA FOR CHARTS -->
<script id="programme-data" type="application/json">
    {{ programme_chart | tojson }}
</script>

<script id="semester-data" type="application/json">
    {{ semester_chart | tojson }}
</script>

{% endif %}

<!-- ======================================================
     RESULT TABLES
====================================================== -->

{% for branch, students in grouped_data.items() %}

<div class="result-section">

    <h2>{{ branch }}</h2>

    <div class="table-wrapper">

        <table>
            <thead>
                <tr>
                    <th>S.No</th>
                    <th>Full Name</th>
                    <th>Semester</th>
                    <th>Gender</th>
                    <th>Programme / Branch</th>
                    <th>Phone Number</th>

                    {% if team %}
                        <th>Team Members</th>
                    {% endif %}
                </tr>
            </thead>

            <tbody>
                {% for row in students %}
                <tr>
                    <td>{{ row["SNO"] }}</td>
                    <td>{{ row["Full Name"] }}</td>
                    <td>{{ row["Semester"] }}</td>
                    <td>{{ row["Gender"] }}</td>
                    <td>{{ row["Programme / Branch"] }}</td>
                    <td>{{ row["Phone Number"] }}</td>

                    {% if team %}
                        <td>{{ row[team_col] }}</td>
                    {% endif %}
                </tr>
                {% endfor %}
            </tbody>
        </table>

    </div>

</div>

{% endfor %}

<!-- ======================================================
     FOOTER
====================================================== -->

<p style="text-align:center; margin-top:60px; opacity:0.7; font-size:14px;">
    Â© NFSU Tripura Campus â€¢ Sports Day Data Portal
</p>

<!-- ======================================================
     JS
====================================================== -->

<script src="/static/charts.js"></script>

</body>
</html>
